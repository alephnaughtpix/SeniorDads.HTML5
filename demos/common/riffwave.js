/* 
 * RIFFWAVE.js v0.03 - Audio encoder for HTML5 <audio> elements.
 * Copyleft 2011 by Pedro Ladaria <pedro.ladaria at Gmail dot com>
 */
var FastBase64={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encLookup:[],Init:function(){for(var a=0;4096>a;a++)this.encLookup[a]=this.chars[a>>6]+this.chars[a&63]},Encode:function(a){for(var e=a.length,b="",c=0;2<e;)n=a[c]<<16|a[c+1]<<8|a[c+2],b+=this.encLookup[n>>12]+this.encLookup[n&4095],e-=3,c+=3;if(0<e){var d=(a[c]&252)>>2,f=(a[c]&3)<<4;1<e&&(f|=(a[++c]&240)>>4);b+=this.chars[d];b+=this.chars[f];2==e&&(d=(a[c++]&15)<<2,d|=(a[c]&192)>>6,b+=this.chars[d]);1==e&&(b+=
"=");b+="="}return b}};FastBase64.Init();
var RIFFWAVE=function(a){function e(d){return[d&255,d>>8&255,d>>16&255,d>>24&255]}function b(d){return[d&255,d>>8&255]}function c(d){for(var a=[],b=0,e=d.length,c=0;c<e;c++)a[b++]=d[c]&255,a[b++]=d[c]>>8&255;return a}this.data=[];this.wav=[];this.dataURI="";this.header={chunkId:[82,73,70,70],chunkSize:0,format:[87,65,86,69],subChunk1Id:[102,109,116,32],subChunk1Size:16,audioFormat:1,numChannels:1,sampleRate:8E3,byteRate:0,blockAlign:0,bitsPerSample:8,subChunk2Id:[100,97,116,97],subChunk2Size:0};this.Make=
function(a){a instanceof Array&&(this.data=a);this.header.blockAlign=this.header.numChannels*this.header.bitsPerSample>>3;this.header.byteRate=this.header.blockAlign*this.sampleRate;this.header.subChunk2Size=this.data.length*(this.header.bitsPerSample>>3);this.header.chunkSize=36+this.header.subChunk2Size;this.wav=this.header.chunkId.concat(e(this.header.chunkSize),this.header.format,this.header.subChunk1Id,e(this.header.subChunk1Size),b(this.header.audioFormat),b(this.header.numChannels),e(this.header.sampleRate),
e(this.header.byteRate),b(this.header.blockAlign),b(this.header.bitsPerSample),this.header.subChunk2Id,e(this.header.subChunk2Size),16==this.header.bitsPerSample?c(this.data):this.data);this.dataURI="data:audio/wav;base64,"+FastBase64.Encode(this.wav)};a instanceof Array&&this.Make(a)};